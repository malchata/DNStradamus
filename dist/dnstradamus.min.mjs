function dnstradamus(e){var r=(e=e||{}).context||"body",t=e.include||((e,r)=>!0),n=e.observeChanges||!1,a=document,i=window,o="IntersectionObserver",s="MutationObserver",c="requestIdleCallback",queryDOM=e=>[].slice.call(a.querySelectorAll(e||r+' a[href^="http://"],a[href^="https://"]')),buildLinkTag=e=>{var r=a.createElement("link");r.href=e,r.rel="dns-prefetch",a.head.appendChild(r)},getOriginFromHref=e=>{var r=e.split("/");return r[0]+"//"+r[2]+"/"};if(o in i&&o+"Entry"in i&&i.matchMedia("(prefers-reduced-data: no-preference)").matches){var d=[],l=new i[o](((e,r)=>{e.forEach((e=>{if(e.intersectionRatio){var o=e.target,s=getOriginFromHref(o.href);d.indexOf(s)<0&&s.indexOf(a.location.protocol+"//"+a.location.host)<0&&t(o,s)&&(c in i?i[c]((()=>{buildLinkTag(s)})):buildLinkTag(s),d.push(s)),r.unobserve(o),(f=f.filter((e=>e!=o))).length||n||l.disconnect()}}))})),f=queryDOM();for(var h in f)l.observe(f[h]);s in i&&n&&new i[s]((e=>{queryDOM().forEach((e=>{f.indexOf(e)<0&&d.indexOf(getOriginFromHref(e.href))<0&&(f.push(e),l.observe(e))}))})).observe(queryDOM(r)[0],{childList:!0,subtree:!0})}}export default dnstradamus;
