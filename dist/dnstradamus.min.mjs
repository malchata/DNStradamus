export default function(e){var t=(e=e||{}).context||"body",n=e.include||((e,t)=>!0),r="timeout"in e?e.timeout:4e3,i=e.observeChanges||!1,o=document,a=window,c=navigator,l="IntersectionObserver",s="MutationObserver",f="requestIdleCallback",h=[],queryDOM=e=>h.slice.call(o.querySelectorAll(e||t+' a[href^="http://"],a[href^="https://"]')),buildLinkTag=e=>{var t=o.createElement("link");t.href=e,t.rel="dns-prefetch",o.head.appendChild(t)},getOriginFromHref=e=>{var t=e.split("/");return t[0]+"//"+t[2]+"/"};if(l in a&&l+"Entry"in a&&0==("connection"in c&&c.connection.saveData)){var d=[],u=new a[l]((e,t)=>{e.forEach(e=>{if(e.intersectionRatio){var c=e.target,l=getOriginFromHref(c.href);d.indexOf(l)<0&&l.indexOf(o.location.protocol+"//"+o.location.host)<0&&n(c,l)&&(r&&f in a?a[f](()=>{buildLinkTag(l)},{timeout:r}):buildLinkTag(l),d.push(l)),t.unobserve(c),(v=v.filter(e=>e!=c)).length||i||u.disconnect()}})}),v=queryDOM();for(var b in v)u.observe(v[b]);s in a&&i&&new a[s](e=>{queryDOM().forEach(e=>{v.indexOf(e)<0&&d.indexOf(getOriginFromHref(e.href))<0&&(v.push(e),u.observe(e))})}).observe(queryDOM(t)[0],{childList:!0,subtree:!0})}}
